<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat with Mia</title>
    <!-- Include the same API scripts as index.html -->
    <script src="https://apis.google.com/js/api.js"></script>
    <script src="https://accounts.google.com/gsi/client"></script>
    <link rel="stylesheet" href="styles.css">
    <!-- Add Dialogflow messenger script -->
    <script src="https://www.gstatic.com/dialogflow-console/fast/messenger/bootstrap.js?v=1"></script>
    <link rel="icon" type="image/x-icon" href="https://i.imgur.com/kj09wS4.png">
    <!-- Include Google Maps API with the same key -->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDFVaRrTxOyR-fX3XAOp1tjoeg58mkj254&libraries=places"></script>
</head>
<body>
    <header>
        <img src="https://i.imgur.com/kj09wS4.png" alt="Iron Peak Roofing Logo" class="logo">
        <h1>Chat with Mia</h1>
       <nav class="nav-container">
    <button class="menu-toggle" onclick="toggleMenu()" aria-label="Toggle Menu">
        <span class="hamburger"></span>
    </button>
    <ul class="nav-menu">
        <li><a href="index.html">Home</a></li>
        <li><a href="#" onclick="showSection('measureRoofSection'); return false;">Measurement</a></li>
        <li><a href="mia.html">Chat with Mia</a></li>
    </ul>
</nav>
    </header>

    <!-- Dialogflow CX Messenger Element -->
    <df-messenger
        intent="WELCOME"
        location="us"
        project-id="ipr-roof-estimate-form-review"
        agent-id="5343493c-e057-445c-a767-86216ae1862d"
        language-code="en"
        chat-title="Mia"
        chat-icon="https://i.imgur.com/kj09wS4.png">
    </df-messenger>

    <style>
        df-messenger {
            z-index: 999;
            position: fixed;
            bottom: 16px;
            right: 16px;
            --df-messenger-bot-message: #878fac;
            --df-messenger-button-titlebar-color: #0056b3;
            --df-messenger-chat-background-color: #fafafa;
            --df-messenger-font-color: rgba(0, 0, 0, 0.87);
            --df-messenger-send-icon: #0056b3;
            --df-messenger-user-message: #0056b3;
        }
    </style>

    <main>
        <h2>Welcome to the Mia Chatbot Page!</h2>
        <p>This page will host the Mia chatbot for testing.</p>
    </main>

    <footer>
        <p>&copy; 2025 Iron Peak Roofing. All rights reserved.</p>
    </footer>

    <script>
        window.addEventListener('df-messenger-loaded', function() {
            console.log('Dialogflow CX Messenger loaded successfully');
        });

        window.addEventListener('df-messenger-error', function(event) {
            console.error('Dialogflow CX Messenger Error:', event.detail);
            if (event.detail && event.detail.error) {
                console.log('Error details:', {
                    code: event.detail.error.code,
                    message: event.detail.error.message
                });
            }
        });
    </script>
</body>
</html>
